{"version":3,"file":"carousel.js","sources":["../src/carousel.js"],"sourcesContent":["import $ from 'jquery'\nimport Util from './util'\n\n\n/**\n * --------------------------------------------------------------------------\n * Bootstrap (v4.0.0-beta): carousel.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * --------------------------------------------------------------------------\n */\n\n/**\n * ------------------------------------------------------------------------\n * Constants\n * ------------------------------------------------------------------------\n */\n\nconst NAME                   = 'carousel'\nconst VERSION                = '4.0.0-beta'\nconst DATA_KEY               = 'bs.carousel'\nconst EVENT_KEY              = `.${DATA_KEY}`\nconst DATA_API_KEY           = '.data-api'\nconst JQUERY_NO_CONFLICT     = $.fn[NAME]\nconst TRANSITION_DURATION    = 600\nconst ARROW_LEFT_KEYCODE     = 37 // KeyboardEvent.which value for left arrow key\nconst ARROW_RIGHT_KEYCODE    = 39 // KeyboardEvent.which value for right arrow key\nconst TOUCHEVENT_COMPAT_WAIT = 500 // Time for mouse compat events to fire after touch\n\nconst Default = {\n  interval : 5000,\n  keyboard : true,\n  slide    : false,\n  pause    : 'hover',\n  wrap     : true\n}\n\nconst DefaultType = {\n  interval : '(number|boolean)',\n  keyboard : 'boolean',\n  slide    : '(boolean|string)',\n  pause    : '(string|boolean)',\n  wrap     : 'boolean'\n}\n\nconst Direction = {\n  NEXT     : 'next',\n  PREV     : 'prev',\n  LEFT     : 'left',\n  RIGHT    : 'right'\n}\n\nconst Event = {\n  SLIDE          : `slide${EVENT_KEY}`,\n  SLID           : `slid${EVENT_KEY}`,\n  KEYDOWN        : `keydown${EVENT_KEY}`,\n  MOUSEENTER     : `mouseenter${EVENT_KEY}`,\n  MOUSELEAVE     : `mouseleave${EVENT_KEY}`,\n  TOUCHEND       : `touchend${EVENT_KEY}`,\n  LOAD_DATA_API  : `load${EVENT_KEY}${DATA_API_KEY}`,\n  CLICK_DATA_API : `click${EVENT_KEY}${DATA_API_KEY}`\n}\n\nconst ClassName = {\n  CAROUSEL : 'carousel',\n  ACTIVE   : 'active',\n  SLIDE    : 'slide',\n  RIGHT    : 'carousel-item-right',\n  LEFT     : 'carousel-item-left',\n  NEXT     : 'carousel-item-next',\n  PREV     : 'carousel-item-prev',\n  ITEM     : 'carousel-item'\n}\n\nconst Selector = {\n  ACTIVE      : '.active',\n  ACTIVE_ITEM : '.active.carousel-item',\n  ITEM        : '.carousel-item',\n  NEXT_PREV   : '.carousel-item-next, .carousel-item-prev',\n  INDICATORS  : '.carousel-indicators',\n  DATA_SLIDE  : '[data-slide], [data-slide-to]',\n  DATA_RIDE   : '[data-ride=\"carousel\"]'\n}\n\n\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\n\nexport default class Carousel {\n\n  constructor(element, config) {\n    this._items             = null\n    this._interval          = null\n    this._activeElement     = null\n\n    this._isPaused          = false\n    this._isSliding         = false\n\n    this.touchTimeout       = null\n\n    this._config            = this._getConfig(config)\n    this._element           = $(element)[0]\n    this._indicatorsElement = $(this._element).find(Selector.INDICATORS)[0]\n\n    this._addEventListeners()\n  }\n\n\n  // getters\n\n  static get VERSION() {\n    return VERSION\n  }\n\n  static get Default() {\n    return Default\n  }\n\n\n  // public\n\n  next() {\n    if (!this._isSliding) {\n      this._slide(Direction.NEXT)\n    }\n  }\n\n  nextWhenVisible() {\n    // Don't call next when the page isn't visible\n    // or the carousel or its parent isn't visible\n    if (!document.hidden &&\n      ($(this._element).is(':visible') && $(this._element).css('visibility') !== 'hidden')) {\n      this.next()\n    }\n  }\n\n  prev() {\n    if (!this._isSliding) {\n      this._slide(Direction.PREV)\n    }\n  }\n\n  pause(event) {\n    if (!event) {\n      this._isPaused = true\n    }\n\n    if ($(this._element).find(Selector.NEXT_PREV)[0] &&\n      Util.supportsTransitionEnd()) {\n      Util.triggerTransitionEnd(this._element)\n      this.cycle(true)\n    }\n\n    clearInterval(this._interval)\n    this._interval = null\n  }\n\n  cycle(event) {\n    if (!event) {\n      this._isPaused = false\n    }\n\n    if (this._interval) {\n      clearInterval(this._interval)\n      this._interval = null\n    }\n\n    if (this._config.interval && !this._isPaused) {\n      this._interval = setInterval(\n        (document.visibilityState ? this.nextWhenVisible : this.next).bind(this),\n        this._config.interval\n      )\n    }\n  }\n\n  to(index) {\n    this._activeElement = $(this._element).find(Selector.ACTIVE_ITEM)[0]\n\n    const activeIndex = this._getItemIndex(this._activeElement)\n\n    if (index > this._items.length - 1 || index < 0) {\n      return\n    }\n\n    if (this._isSliding) {\n      $(this._element).one(Event.SLID, () => this.to(index))\n      return\n    }\n\n    if (activeIndex === index) {\n      this.pause()\n      this.cycle()\n      return\n    }\n\n    const direction = index > activeIndex ?\n      Direction.NEXT :\n      Direction.PREV\n\n    this._slide(direction, this._items[index])\n  }\n\n  dispose() {\n    $(this._element).off(EVENT_KEY)\n    $.removeData(this._element, DATA_KEY)\n\n    this._items             = null\n    this._config            = null\n    this._element           = null\n    this._interval          = null\n    this._isPaused          = null\n    this._isSliding         = null\n    this._activeElement     = null\n    this._indicatorsElement = null\n  }\n\n\n  // private\n\n  _getConfig(config) {\n    config = $.extend({}, Default, config)\n    Util.typeCheckConfig(NAME, config, DefaultType)\n    return config\n  }\n\n  _addEventListeners() {\n    if (this._config.keyboard) {\n      $(this._element)\n        .on(Event.KEYDOWN, (event) => this._keydown(event))\n    }\n\n    if (this._config.pause === 'hover') {\n      $(this._element)\n        .on(Event.MOUSEENTER, (event) => this.pause(event))\n        .on(Event.MOUSELEAVE, (event) => this.cycle(event))\n      if ('ontouchstart' in document.documentElement) {\n        // if it's a touch-enabled device, mouseenter/leave are fired as\n        // part of the mouse compatibility events on first tap - the carousel\n        // would stop cycling until user tapped out of it;\n        // here, we listen for touchend, explicitly pause the carousel\n        // (as if it's the second time we tap on it, mouseenter compat event\n        // is NOT fired) and after a timeout (to allow for mouse compatibility\n        // events to fire) we explicitly restart cycling\n        $(this._element).on(Event.TOUCHEND, () => {\n          this.pause()\n          if (this.touchTimeout) {\n            clearTimeout(this.touchTimeout)\n          }\n          this.touchTimeout = setTimeout((event) => this.cycle(event), TOUCHEVENT_COMPAT_WAIT + this._config.interval)\n        })\n      }\n    }\n  }\n\n  _keydown(event) {\n    if (/input|textarea/i.test(event.target.tagName)) {\n      return\n    }\n\n    switch (event.which) {\n      case ARROW_LEFT_KEYCODE:\n        event.preventDefault()\n        this.prev()\n        break\n      case ARROW_RIGHT_KEYCODE:\n        event.preventDefault()\n        this.next()\n        break\n      default:\n        return\n    }\n  }\n\n  _getItemIndex(element) {\n    this._items = $.makeArray($(element).parent().find(Selector.ITEM))\n    return this._items.indexOf(element)\n  }\n\n  _getItemByDirection(direction, activeElement) {\n    const isNextDirection = direction === Direction.NEXT\n    const isPrevDirection = direction === Direction.PREV\n    const activeIndex     = this._getItemIndex(activeElement)\n    const lastItemIndex   = this._items.length - 1\n    const isGoingToWrap   = isPrevDirection && activeIndex === 0 ||\n                            isNextDirection && activeIndex === lastItemIndex\n\n    if (isGoingToWrap && !this._config.wrap) {\n      return activeElement\n    }\n\n    const delta     = direction === Direction.PREV ? -1 : 1\n    const itemIndex = (activeIndex + delta) % this._items.length\n\n    return itemIndex === -1 ?\n      this._items[this._items.length - 1] : this._items[itemIndex]\n  }\n\n\n  _triggerSlideEvent(relatedTarget, eventDirectionName) {\n    const targetIndex = this._getItemIndex(relatedTarget)\n    const fromIndex = this._getItemIndex($(this._element).find(Selector.ACTIVE_ITEM)[0])\n    const slideEvent = $.Event(Event.SLIDE, {\n      relatedTarget,\n      direction: eventDirectionName,\n      from: fromIndex,\n      to: targetIndex\n    })\n\n    $(this._element).trigger(slideEvent)\n\n    return slideEvent\n  }\n\n  _setActiveIndicatorElement(element) {\n    if (this._indicatorsElement) {\n      $(this._indicatorsElement)\n        .find(Selector.ACTIVE)\n        .removeClass(ClassName.ACTIVE)\n\n      const nextIndicator = this._indicatorsElement.children[\n        this._getItemIndex(element)\n      ]\n\n      if (nextIndicator) {\n        $(nextIndicator).addClass(ClassName.ACTIVE)\n      }\n    }\n  }\n\n  _slide(direction, element) {\n    const activeElement = $(this._element).find(Selector.ACTIVE_ITEM)[0]\n    const activeElementIndex = this._getItemIndex(activeElement)\n    const nextElement   = element || activeElement &&\n      this._getItemByDirection(direction, activeElement)\n    const nextElementIndex = this._getItemIndex(nextElement)\n    const isCycling = Boolean(this._interval)\n\n    let directionalClassName\n    let orderClassName\n    let eventDirectionName\n\n    if (direction === Direction.NEXT) {\n      directionalClassName = ClassName.LEFT\n      orderClassName = ClassName.NEXT\n      eventDirectionName = Direction.LEFT\n    } else {\n      directionalClassName = ClassName.RIGHT\n      orderClassName = ClassName.PREV\n      eventDirectionName = Direction.RIGHT\n    }\n\n    if (nextElement && $(nextElement).hasClass(ClassName.ACTIVE)) {\n      this._isSliding = false\n      return\n    }\n\n    const slideEvent = this._triggerSlideEvent(nextElement, eventDirectionName)\n    if (slideEvent.isDefaultPrevented()) {\n      return\n    }\n\n    if (!activeElement || !nextElement) {\n      // some weirdness is happening, so we bail\n      return\n    }\n\n    this._isSliding = true\n\n    if (isCycling) {\n      this.pause()\n    }\n\n    this._setActiveIndicatorElement(nextElement)\n\n    const slidEvent = $.Event(Event.SLID, {\n      relatedTarget: nextElement,\n      direction: eventDirectionName,\n      from: activeElementIndex,\n      to: nextElementIndex\n    })\n\n    if (Util.supportsTransitionEnd() &&\n      $(this._element).hasClass(ClassName.SLIDE)) {\n\n      $(nextElement).addClass(orderClassName)\n\n      Util.reflow(nextElement)\n\n      $(activeElement).addClass(directionalClassName)\n      $(nextElement).addClass(directionalClassName)\n\n      $(activeElement)\n        .one(Util.TRANSITION_END, () => {\n          $(nextElement)\n            .removeClass(`${directionalClassName} ${orderClassName}`)\n            .addClass(ClassName.ACTIVE)\n\n          $(activeElement).removeClass(`${ClassName.ACTIVE} ${orderClassName} ${directionalClassName}`)\n\n          this._isSliding = false\n\n          setTimeout(() => $(this._element).trigger(slidEvent), 0)\n\n        })\n        .emulateTransitionEnd(TRANSITION_DURATION)\n\n    } else {\n      $(activeElement).removeClass(ClassName.ACTIVE)\n      $(nextElement).addClass(ClassName.ACTIVE)\n\n      this._isSliding = false\n      $(this._element).trigger(slidEvent)\n    }\n\n    if (isCycling) {\n      this.cycle()\n    }\n  }\n\n\n  // static\n\n  static _jQueryInterface(config) {\n    return this.each(function () {\n      let data      = $(this).data(DATA_KEY)\n      const _config = $.extend({}, Default, $(this).data())\n\n      if (typeof config === 'object') {\n        $.extend(_config, config)\n      }\n\n      const action = typeof config === 'string' ? config : _config.slide\n\n      if (!data) {\n        data = new Carousel(this, _config)\n        $(this).data(DATA_KEY, data)\n      }\n\n      if (typeof config === 'number') {\n        data.to(config)\n      } else if (typeof action === 'string') {\n        if (data[action] === undefined) {\n          throw new Error(`No method named \"${action}\"`)\n        }\n        data[action]()\n      } else if (_config.interval) {\n        data.pause()\n        data.cycle()\n      }\n    })\n  }\n\n  static _dataApiClickHandler(event) {\n    const selector = Util.getSelectorFromElement(this)\n\n    if (!selector) {\n      return\n    }\n\n    const target = $(selector)[0]\n\n    if (!target || !$(target).hasClass(ClassName.CAROUSEL)) {\n      return\n    }\n\n    const config     = $.extend({}, $(target).data(), $(this).data())\n    const slideIndex = this.getAttribute('data-slide-to')\n\n    if (slideIndex) {\n      config.interval = false\n    }\n\n    Carousel._jQueryInterface.call($(target), config)\n\n    if (slideIndex) {\n      $(target).data(DATA_KEY).to(slideIndex)\n    }\n\n    event.preventDefault()\n  }\n}\n\n/**\n * ------------------------------------------------------------------------\n * Data Api implementation\n * ------------------------------------------------------------------------\n */\n\n$(document)\n  .on(Event.CLICK_DATA_API, Selector.DATA_SLIDE, Carousel._dataApiClickHandler)\n\n$(window).on(Event.LOAD_DATA_API, () => {\n  $(Selector.DATA_RIDE).each(function () {\n    const $carousel = $(this)\n    Carousel._jQueryInterface.call($carousel, $carousel.data())\n  })\n})\n\n/**\n * ------------------------------------------------------------------------\n * jQuery\n * ------------------------------------------------------------------------\n */\n\n$.fn[NAME]             = Carousel._jQueryInterface\n$.fn[NAME].Constructor = Carousel\n$.fn[NAME].noConflict  = function () {\n  $.fn[NAME] = JQUERY_NO_CONFLICT\n  return Carousel._jQueryInterface\n}\n"],"names":["NAME","VERSION","DATA_KEY","EVENT_KEY","DATA_API_KEY","JQUERY_NO_CONFLICT","$","fn","TRANSITION_DURATION","ARROW_LEFT_KEYCODE","ARROW_RIGHT_KEYCODE","TOUCHEVENT_COMPAT_WAIT","Default","DefaultType","Direction","Event","ClassName","Selector","Carousel","element","config","_items","_interval","_activeElement","_isPaused","_isSliding","touchTimeout","_config","_getConfig","_element","_indicatorsElement","find","INDICATORS","_addEventListeners","_slide","NEXT","document","hidden","is","css","next","PREV","event","NEXT_PREV","Util","supportsTransitionEnd","triggerTransitionEnd","cycle","interval","setInterval","visibilityState","nextWhenVisible","bind","index","ACTIVE_ITEM","activeIndex","_getItemIndex","length","one","SLID","to","pause","direction","off","removeData","extend","typeCheckConfig","keyboard","on","KEYDOWN","_keydown","MOUSEENTER","MOUSELEAVE","documentElement","TOUCHEND","setTimeout","test","target","tagName","which","preventDefault","prev","makeArray","parent","ITEM","indexOf","activeElement","isNextDirection","isPrevDirection","lastItemIndex","isGoingToWrap","wrap","delta","itemIndex","relatedTarget","eventDirectionName","targetIndex","fromIndex","slideEvent","SLIDE","trigger","ACTIVE","removeClass","nextIndicator","children","addClass","activeElementIndex","nextElement","_getItemByDirection","nextElementIndex","isCycling","Boolean","directionalClassName","orderClassName","LEFT","RIGHT","hasClass","_triggerSlideEvent","isDefaultPrevented","_setActiveIndicatorElement","slidEvent","reflow","TRANSITION_END","emulateTransitionEnd","each","data","action","slide","undefined","Error","selector","getSelectorFromElement","CAROUSEL","slideIndex","getAttribute","_jQueryInterface","call","CLICK_DATA_API","DATA_SLIDE","_dataApiClickHandler","window","LOAD_DATA_API","DATA_RIDE","$carousel","Constructor","noConflict"],"mappings":"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"}