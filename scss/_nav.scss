@use "config" as *;
@use "variables" as *;
@use "mixins/border-radius" as *;
@use "mixins/focus-ring" as *;
@use "mixins/gradients" as *;
@use "mixins/transition" as *;

// scss-docs-start nav-variables
$nav-gap:                           .125rem !default;
$nav-link-gap:                      .5rem !default;
$nav-link-padding-y:                .5rem !default;
$nav-link-padding-x:                1rem !default;
$nav-link-color:                    var(--fg-2) !default;
$nav-link-hover-color:              var(--fg-1) !default;
$nav-link-hover-bg:                 var(--bg-1) !default;
$nav-link-transition:               color .15s ease-in-out, background-color .15s ease-in-out, border-color .15s ease-in-out !default;
$nav-link-disabled-color:           var(--fg-4) !default;
$nav-link-active-color:             var(--fg-body) !default;
$nav-link-active-bg:                var(--bg-2) !default;

$nav-tabs-border-color:             var(--border-color) !default;
$nav-tabs-border-width:             var(--border-width) !default;
$nav-tabs-border-radius:            var(--border-radius) !default;
$nav-tabs-link-hover-border-color:  var(--border-subtle) !default;
$nav-tabs-link-active-color:        var(--emphasis-color) !default;
$nav-tabs-link-active-bg:           var(--bg-body) !default;
$nav-tabs-link-active-border-color: var(--border-color) var(--border-color) $nav-tabs-link-active-bg !default;

$nav-pills-link-active-color:       $component-active-color !default;
$nav-pills-link-active-bg:          $component-active-bg !default;

$nav-underline-gap:                 1rem !default;
$nav-underline-border-width:        .125rem !default;
$nav-underline-link-active-color:   var(--emphasis-color) !default;
// scss-docs-end nav-variables

// Base class
//
// Kickstart any navigation component with a set of style resets. Works with
// `<nav>`s, `<ul>`s or `<ol>`s.

@layer components {
  .nav {
    // scss-docs-start nav-css-vars
    --nav-gap: #{$nav-gap};
    --nav-link-gap: #{$nav-link-gap};
    --nav-link-padding-x: #{$nav-link-padding-x};
    --nav-link-padding-y: #{$nav-link-padding-y};
    --nav-link-color: #{$nav-link-color};
    --nav-link-hover-color: #{$nav-link-hover-color};
    --nav-link-hover-bg: #{$nav-link-hover-bg};
    --nav-link-active-color: #{$nav-link-active-color};
    --nav-link-active-bg: #{$nav-link-active-bg};
    --nav-link-disabled-color: #{$nav-link-disabled-color};
    // scss-docs-end nav-css-vars

    display: flex;
    flex-wrap: wrap;
    gap: var(--nav-gap);
    padding-inline-start: 0;
    margin-bottom: 0;
    list-style: none;
  }

  .nav-item {
    display: flex;

  }

  .nav-link {
    display: flex;
    gap: var(--nav-link-gap);
    align-items: center;
    justify-content: center;
    padding: var(--nav-link-padding-y) var(--nav-link-padding-x);
    font-weight: var(--nav-link-font-weight);
    color: var(--nav-link-color);
    text-decoration: none;
    background: none;
    border: 0;
    @include border-radius(var(--border-radius));
    // @include font-size(var(--nav-link-font-size));
    @include transition($nav-link-transition);

    &:hover,
    &:focus {
      color: var(--nav-link-hover-color);
      background-color: var(--nav-link-hover-bg);
    }

    &:focus-visible {
      --focus-ring-offset: 1px;
      color: var(--nav-link-hover-color);
      @include focus-ring(true);
    }

    &.active,
    &:active {
      color: var(--nav-link-active-color);
      background-color: var(--nav-link-active-bg);
    }

    // Disabled state lightens text
    &.disabled,
    &:disabled {
      color: var(--nav-link-disabled-color);
      pointer-events: none;
      cursor: default;
    }
  }

  //
  // Tabs
  //

  .nav-tabs {
    // scss-docs-start nav-tabs-css-vars
    --nav-tabs-border-width: #{$nav-tabs-border-width};
    --nav-tabs-border-color: #{$nav-tabs-border-color};
    --nav-tabs-border-radius: #{$nav-tabs-border-radius};
    --nav-tabs-link-hover-border-color: #{$nav-tabs-link-hover-border-color};
    --nav-tabs-link-active-color: #{$nav-tabs-link-active-color};
    --nav-tabs-link-active-bg: #{$nav-tabs-link-active-bg};
    --nav-tabs-link-active-border-color: #{$nav-tabs-link-active-border-color};
    // scss-docs-end nav-tabs-css-vars

    border-block-end: var(--nav-tabs-border-width) solid var(--nav-tabs-border-color);

    .nav-link {
      margin-bottom: calc(-1 * var(--nav-tabs-border-width));
      border: var(--nav-tabs-border-width) solid transparent;
      @include border-bottom-radius(0);

      &:hover {
        // Prevents active .nav-link tab overlapping focus outline of previous/next .nav-link
        isolation: isolate;
        border-color: var(--nav-tabs-link-hover-border-color);
        border-bottom-color: var(--nav-tabs-border-color);
      }
    }

    .nav-link.active,
    .nav-item.show .nav-link {
      color: var(--nav-tabs-link-active-color);
      background-color: var(--nav-tabs-link-active-bg);
      border-color: var(--nav-tabs-link-active-border-color);
      border-bottom-color: var(--nav-tabs-link-active-bg);
    }

    .dropdown-menu {
      // Make dropdown border overlap tab border
      margin-top: calc(-1 * var(--nav-tabs-border-width));
      // Remove the top rounded corners here since there is a hard edge above the menu
      @include border-top-radius(0);
    }
  }


  //
  // Pills
  //

  .nav-pills {
    // scss-docs-start nav-pills-css-vars
    --nav-pills-link-active-color: #{$nav-pills-link-active-color};
    --nav-pills-link-active-bg: #{$nav-pills-link-active-bg};
    // scss-docs-end nav-pills-css-vars

    .nav-link.active,
    .show > .nav-link {
      color: var(--nav-pills-link-active-color);
      @include gradient-bg(var(--nav-pills-link-active-bg));
    }
  }


  //
  // Underline
  //

  .nav-underline {
    // scss-docs-start nav-underline-css-vars
    --nav-gap: #{$nav-underline-gap};
    --nav-link-active-bg: transparent;
    // --nav-underline-gap: #{$nav-underline-gap};
    --nav-underline-border-width: #{$nav-underline-border-width};
    --nav-underline-link-active-color: #{$nav-underline-link-active-color};
    // scss-docs-end nav-underline-css-vars

    .nav-link {
      padding-inline: 0;
      border-block-end: var(--nav-underline-border-width) solid transparent;
      @include border-radius(0);

      &:hover,
      &:focus {
        border-block-end-color: currentcolor;
      }
    }

    .nav-link.active,
    .show > .nav-link {
      font-weight: $font-weight-bold;
      color: var(--nav-underline-link-active-color);
      border-block-end-color: currentcolor;
    }
  }


  //
  // Justified variants
  //

  .nav-fill {
    > .nav-link,
    .nav-item {
      flex: 1 1 auto;
      text-align: center;
    }
  }

  .nav-justified {
    > .nav-link,
    .nav-item {
      flex-grow: 1;
      flex-basis: 0;
      text-align: center;
    }
  }

  .nav-fill,
  .nav-justified {
    .nav-item .nav-link {
      width: 100%; // Make sure button will grow
    }
  }


  // Tabbable tabs
  //
  // Hide tabbable panes to start, show them when `.active`

  .tab-content {
    > .tab-pane {
      display: none;
    }
    > .active {
      display: block;
    }
  }
}
