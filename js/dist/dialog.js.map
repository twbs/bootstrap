{"version":3,"file":"dialog.js","sources":["../src/dialog.js"],"sourcesContent":["/**\n * --------------------------------------------------------------------------\n * Bootstrap dialog.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport BaseComponent from './base-component.js'\nimport EventHandler from './dom/event-handler.js'\nimport SelectorEngine from './dom/selector-engine.js'\nimport Backdrop from './util/backdrop.js'\nimport { enableDismissTrigger } from './util/component-functions.js'\nimport FocusTrap from './util/focustrap.js'\nimport {\n  isVisible, reflow\n} from './util/index.js'\n\n/**\n * Constants\n */\n\nconst NAME = 'dialog'\nconst DATA_KEY = 'bs.dialog'\nconst EVENT_KEY = `.${DATA_KEY}`\nconst DATA_API_KEY = '.data-api'\nconst ESCAPE_KEY = 'Escape'\n\nconst EVENT_HIDE = `hide${EVENT_KEY}`\nconst EVENT_HIDE_PREVENTED = `hidePrevented${EVENT_KEY}`\nconst EVENT_HIDDEN = `hidden${EVENT_KEY}`\nconst EVENT_SHOW = `show${EVENT_KEY}`\nconst EVENT_SHOWN = `shown${EVENT_KEY}`\nconst EVENT_RESIZE = `resize${EVENT_KEY}`\nconst EVENT_CLICK_DISMISS = `click.dismiss${EVENT_KEY}`\nconst EVENT_MOUSEDOWN_DISMISS = `mousedown.dismiss${EVENT_KEY}`\nconst EVENT_KEYDOWN_DISMISS = `keydown.dismiss${EVENT_KEY}`\nconst EVENT_CLICK_DATA_API = `click${EVENT_KEY}${DATA_API_KEY}`\n\nconst CLASS_NAME_OPEN = 'dialog-open'\nconst CLASS_NAME_FADE = 'fade'\nconst CLASS_NAME_SHOW = 'show'\nconst CLASS_NAME_STATIC = 'dialog-static'\n\nconst OPEN_SELECTOR = '.dialog.show'\nconst SELECTOR_DIALOG_CONTENT = '.dialog-content'\nconst SELECTOR_DIALOG_BODY = '.dialog-body'\nconst SELECTOR_DATA_TOGGLE = '[data-bs-toggle=\"dialog\"]'\n\nconst Default = {\n  backdrop: true,\n  focus: true,\n  keyboard: true,\n  modal: true\n}\n\nconst DefaultType = {\n  backdrop: '(boolean|string)',\n  focus: 'boolean',\n  keyboard: 'boolean',\n  modal: 'boolean'\n}\n\n/**\n * Class definition\n */\n\nclass Dialog extends BaseComponent {\n  constructor(element, config) {\n    super(element, config)\n\n    this._dialogContent = SelectorEngine.findOne(SELECTOR_DIALOG_CONTENT, this._element)\n    this._backdrop = this._initializeBackDrop()\n    this._focustrap = this._initializeFocusTrap()\n    this._isShown = false\n    this._isTransitioning = false\n\n    this._addEventListeners()\n  }\n\n  // Getters\n  static get Default() {\n    return Default\n  }\n\n  static get DefaultType() {\n    return DefaultType\n  }\n\n  static get NAME() {\n    return NAME\n  }\n\n  // Public\n  toggle(relatedTarget) {\n    return this._isShown ? this.hide() : this.show(relatedTarget)\n  }\n\n  show(relatedTarget) {\n    if (this._isShown || this._isTransitioning) {\n      return\n    }\n\n    const showEvent = EventHandler.trigger(this._element, EVENT_SHOW, {\n      relatedTarget\n    })\n\n    if (showEvent.defaultPrevented) {\n      return\n    }\n\n    this._isShown = true\n    this._isTransitioning = true\n\n    // Use scrollbar-gutter CSS property instead of manual scrollbar handling\n    document.body.style.scrollbarGutter = 'stable'\n    document.body.classList.add(CLASS_NAME_OPEN)\n\n    this._backdrop.show(() => this._showElement(relatedTarget))\n  }\n\n  hide() {\n    if (!this._isShown || this._isTransitioning) {\n      return\n    }\n\n    const hideEvent = EventHandler.trigger(this._element, EVENT_HIDE)\n\n    if (hideEvent.defaultPrevented) {\n      return\n    }\n\n    this._isShown = false\n    this._isTransitioning = true\n    this._focustrap.deactivate()\n\n    this._element.classList.remove(CLASS_NAME_SHOW)\n\n    this._queueCallback(() => this._hideDialog(), this._element, this._isAnimated())\n  }\n\n  dispose() {\n    EventHandler.off(window, EVENT_KEY)\n    EventHandler.off(this._element, EVENT_KEY)\n\n    this._backdrop.dispose()\n    this._focustrap.deactivate()\n\n    super.dispose()\n  }\n\n  handleUpdate() {\n    // No dialog adjustments needed with native dialog element\n  }\n\n  // Private\n  _initializeBackDrop() {\n    return new Backdrop({\n      isVisible: Boolean(this._config.backdrop), // 'static' option will be translated to true, and booleans will keep their value,\n      isAnimated: this._isAnimated(),\n      className: 'dialog-backdrop'\n    })\n  }\n\n  _initializeFocusTrap() {\n    return new FocusTrap({\n      trapElement: this._element\n    })\n  }\n\n  _showElement(relatedTarget) {\n    // try to append dynamic dialog\n    if (!document.body.contains(this._element)) {\n      document.body.append(this._element)\n    }\n\n    // Use native dialog methods\n    if (this._config.modal) {\n      this._element.showModal()\n    } else {\n      this._element.show()\n    }\n\n    this._element.scrollTop = 0\n\n    const dialogBody = SelectorEngine.findOne(SELECTOR_DIALOG_BODY, this._dialogContent)\n    if (dialogBody) {\n      dialogBody.scrollTop = 0\n    }\n\n    reflow(this._element)\n\n    this._element.classList.add(CLASS_NAME_SHOW)\n\n    const transitionComplete = () => {\n      if (this._config.focus) {\n        this._focustrap.activate()\n      }\n\n      this._isTransitioning = false\n      EventHandler.trigger(this._element, EVENT_SHOWN, {\n        relatedTarget\n      })\n    }\n\n    this._queueCallback(transitionComplete, this._dialogContent, this._isAnimated())\n  }\n\n  _addEventListeners() {\n    EventHandler.on(this._element, EVENT_KEYDOWN_DISMISS, event => {\n      if (event.key !== ESCAPE_KEY) {\n        return\n      }\n\n      if (this._config.keyboard) {\n        this.hide()\n        return\n      }\n\n      this._triggerBackdropTransition()\n    })\n\n    EventHandler.on(window, EVENT_RESIZE, () => {\n      if (this._isShown && !this._isTransitioning) {\n        // No need for dialog adjustments with native dialog\n      }\n    })\n\n    EventHandler.on(this._element, EVENT_MOUSEDOWN_DISMISS, event => {\n      // Handle click outside dialog content\n      EventHandler.one(this._element, EVENT_CLICK_DISMISS, event2 => {\n        if (this._element !== event.target || this._element !== event2.target) {\n          return\n        }\n\n        if (this._config.backdrop === 'static') {\n          this._triggerBackdropTransition()\n          return\n        }\n\n        if (this._config.backdrop) {\n          this.hide()\n        }\n      })\n    })\n  }\n\n  _hideDialog() {\n    // Use native dialog close method\n    this._element.close()\n\n    this._isTransitioning = false\n\n    this._backdrop.hide(() => {\n      document.body.classList.remove(CLASS_NAME_OPEN)\n      document.body.style.scrollbarGutter = ''\n      EventHandler.trigger(this._element, EVENT_HIDDEN)\n    })\n  }\n\n  _isAnimated() {\n    return this._element.classList.contains(CLASS_NAME_FADE)\n  }\n\n  _triggerBackdropTransition() {\n    const hideEvent = EventHandler.trigger(this._element, EVENT_HIDE_PREVENTED)\n    if (hideEvent.defaultPrevented) {\n      return\n    }\n\n    const isDialogOverflowing = this._element.scrollHeight > document.documentElement.clientHeight\n    const initialOverflowY = this._element.style.overflowY\n    // return if the following background transition hasn't yet completed\n    if (initialOverflowY === 'hidden' || this._element.classList.contains(CLASS_NAME_STATIC)) {\n      return\n    }\n\n    if (!isDialogOverflowing) {\n      this._element.style.overflowY = 'hidden'\n    }\n\n    this._element.classList.add(CLASS_NAME_STATIC)\n    this._queueCallback(() => {\n      this._element.classList.remove(CLASS_NAME_STATIC)\n      this._queueCallback(() => {\n        this._element.style.overflowY = initialOverflowY\n      }, this._dialogContent)\n    }, this._dialogContent)\n\n    this._element.focus()\n  }\n\n  // Static\n  static jQueryInterface(config, relatedTarget) {\n    return this.each(function () {\n      const data = Dialog.getOrCreateInstance(this, config)\n\n      if (typeof config !== 'string') {\n        return\n      }\n\n      if (typeof data[config] === 'undefined') {\n        throw new TypeError(`No method named \"${config}\"`)\n      }\n\n      data[config](relatedTarget)\n    })\n  }\n}\n\n/**\n * Data API implementation\n */\n\nEventHandler.on(document, EVENT_CLICK_DATA_API, SELECTOR_DATA_TOGGLE, function (event) {\n  const target = SelectorEngine.getElementFromSelector(this)\n\n  if (['A', 'AREA'].includes(this.tagName)) {\n    event.preventDefault()\n  }\n\n  EventHandler.one(target, EVENT_SHOW, showEvent => {\n    if (showEvent.defaultPrevented) {\n      // only register focus restorer if dialog will actually get shown\n      return\n    }\n\n    EventHandler.one(target, EVENT_HIDDEN, () => {\n      if (isVisible(this)) {\n        this.focus()\n      }\n    })\n  })\n\n  // avoid conflict when clicking dialog toggler while another one is open\n  const alreadyOpen = SelectorEngine.findOne(OPEN_SELECTOR)\n  if (alreadyOpen) {\n    Dialog.getInstance(alreadyOpen).hide()\n  }\n\n  const data = Dialog.getOrCreateInstance(target)\n\n  data.toggle(this)\n})\n\nenableDismissTrigger(Dialog)\n\nexport default Dialog"],"names":["NAME","DATA_KEY","EVENT_KEY","DATA_API_KEY","ESCAPE_KEY","EVENT_HIDE","EVENT_HIDE_PREVENTED","EVENT_HIDDEN","EVENT_SHOW","EVENT_SHOWN","EVENT_RESIZE","EVENT_CLICK_DISMISS","EVENT_MOUSEDOWN_DISMISS","EVENT_KEYDOWN_DISMISS","EVENT_CLICK_DATA_API","CLASS_NAME_OPEN","CLASS_NAME_FADE","CLASS_NAME_SHOW","CLASS_NAME_STATIC","OPEN_SELECTOR","SELECTOR_DIALOG_CONTENT","SELECTOR_DIALOG_BODY","SELECTOR_DATA_TOGGLE","Default","backdrop","focus","keyboard","modal","DefaultType","Dialog","BaseComponent","constructor","element","config","_dialogContent","SelectorEngine","findOne","_element","_backdrop","_initializeBackDrop","_focustrap","_initializeFocusTrap","_isShown","_isTransitioning","_addEventListeners","toggle","relatedTarget","hide","show","showEvent","EventHandler","trigger","defaultPrevented","document","body","style","scrollbarGutter","classList","add","_showElement","hideEvent","deactivate","remove","_queueCallback","_hideDialog","_isAnimated","dispose","off","window","handleUpdate","Backdrop","isVisible","Boolean","_config","isAnimated","className","FocusTrap","trapElement","contains","append","showModal","scrollTop","dialogBody","reflow","transitionComplete","activate","on","event","key","_triggerBackdropTransition","one","event2","target","close","isDialogOverflowing","scrollHeight","documentElement","clientHeight","initialOverflowY","overflowY","jQueryInterface","each","data","getOrCreateInstance","TypeError","getElementFromSelector","includes","tagName","preventDefault","alreadyOpen","getInstance","enableDismissTrigger"],"mappings":"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"}