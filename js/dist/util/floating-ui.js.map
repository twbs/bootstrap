{"version":3,"file":"floating-ui.js","sources":["../../src/util/floating-ui.js"],"sourcesContent":["/**\n * --------------------------------------------------------------------------\n * Bootstrap util/floating-ui.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)\n * --------------------------------------------------------------------------\n */\n\nimport { isRTL } from './index.js'\n\n/**\n * Breakpoints for responsive placement (matches SCSS $grid-breakpoints)\n */\nexport const BREAKPOINTS = {\n  sm: 576,\n  md: 768,\n  lg: 1024,\n  xl: 1280,\n  '2xl': 1536\n}\n\n/**\n * Default placement with RTL support\n */\nexport const getDefaultPlacement = (fallback = 'bottom') => {\n  if (fallback.includes('-start') || fallback.includes('-end')) {\n    const [side, alignment] = fallback.split('-')\n    const flippedAlignment = alignment === 'start' ? 'end' : 'start'\n    return isRTL() ? `${side}-${flippedAlignment}` : fallback\n  }\n\n  return fallback\n}\n\n/**\n * Parse a placement string that may contain responsive prefixes\n * Example: \"bottom-start md:top-end lg:right\" returns { xs: 'bottom-start', md: 'top-end', lg: 'right' }\n *\n * @param {string} placementString - The placement string to parse\n * @param {string} defaultPlacement - The default placement to use for xs/base\n * @returns {object|null} - Object with breakpoint keys and placement values, or null if not responsive\n */\nexport const parseResponsivePlacement = (placementString, defaultPlacement = 'bottom') => {\n  // Check if placement contains responsive prefixes (e.g., \"bottom-start md:top-end\")\n  if (!placementString || !placementString.includes(':')) {\n    return null\n  }\n\n  // Parse the placement string into breakpoint-keyed object\n  const parts = placementString.split(/\\s+/)\n  const placements = { xs: defaultPlacement } // Default fallback\n\n  for (const part of parts) {\n    if (part.includes(':')) {\n      // Responsive placement like \"md:top-end\"\n      const [breakpoint, placement] = part.split(':')\n      if (BREAKPOINTS[breakpoint] !== undefined) {\n        placements[breakpoint] = placement\n      }\n    } else {\n      // Base placement (no prefix = xs/default)\n      placements.xs = part\n    }\n  }\n\n  return placements\n}\n\n/**\n * Get the active placement for the current viewport width\n *\n * @param {object} responsivePlacements - Object with breakpoint keys and placement values\n * @param {string} defaultPlacement - Fallback placement\n * @returns {string} - The active placement for current viewport\n */\nexport const getResponsivePlacement = (responsivePlacements, defaultPlacement = 'bottom') => {\n  if (!responsivePlacements) {\n    return defaultPlacement\n  }\n\n  // Get current viewport width\n  const viewportWidth = window.innerWidth\n\n  // Find the largest breakpoint that matches\n  let activePlacement = responsivePlacements.xs || defaultPlacement\n\n  // Check breakpoints in order (sm, md, lg, xl, 2xl)\n  const breakpointOrder = ['sm', 'md', 'lg', 'xl', '2xl']\n\n  for (const breakpoint of breakpointOrder) {\n    const minWidth = BREAKPOINTS[breakpoint]\n    if (viewportWidth >= minWidth && responsivePlacements[breakpoint]) {\n      activePlacement = responsivePlacements[breakpoint]\n    }\n  }\n\n  return activePlacement\n}\n\n/**\n * Create media query listeners for responsive placement changes\n *\n * @param {Function} callback - Callback to run when breakpoint changes\n * @returns {Array} - Array of { mql, handler } objects for cleanup\n */\nexport const createBreakpointListeners = callback => {\n  const listeners = []\n\n  for (const breakpoint of Object.keys(BREAKPOINTS)) {\n    const minWidth = BREAKPOINTS[breakpoint]\n    const mql = window.matchMedia(`(min-width: ${minWidth}px)`)\n\n    mql.addEventListener('change', callback)\n    listeners.push({ mql, handler: callback })\n  }\n\n  return listeners\n}\n\n/**\n * Clean up media query listeners\n *\n * @param {Array} listeners - Array of { mql, handler } objects\n */\nexport const disposeBreakpointListeners = listeners => {\n  for (const { mql, handler } of listeners) {\n    mql.removeEventListener('change', handler)\n  }\n}\n"],"names":["BREAKPOINTS","sm","md","lg","xl","getDefaultPlacement","fallback","includes","side","alignment","split","flippedAlignment","isRTL","parseResponsivePlacement","placementString","defaultPlacement","parts","placements","xs","part","breakpoint","placement","undefined","getResponsivePlacement","responsivePlacements","viewportWidth","window","innerWidth","activePlacement","breakpointOrder","minWidth","createBreakpointListeners","callback","listeners","Object","keys","mql","matchMedia","addEventListener","push","handler","disposeBreakpointListeners","removeEventListener"],"mappings":"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"}