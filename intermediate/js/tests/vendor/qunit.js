(function(j){function r(b){if(!b)return"";b+="";return b.replace(/[\&"<>\\]/g,function(a){switch(a){case "&":return"&amp;";case "\\":return"\\\\";case '"':return'"';case "<":return"&lt;";case ">":return"&gt;";default:return a}})}function n(b){c.queue.push(b);c.autorun&&!c.blocking&&s()}function s(){for(var b=(new Date).getTime();c.queue.length&&!c.blocking;)if(c.updateRate<=0||(new Date).getTime()-b<c.updateRate)c.queue.shift()();else{j.setTimeout(s,13);break}if(!c.blocking&&!c.queue.length){c.autorun=
!0;c.currentModule&&f.moduleDone({name:c.currentModule,failed:c.moduleStats.bad,passed:c.moduleStats.all-c.moduleStats.bad,total:c.moduleStats.all});var b=l("qunit-banner"),a=l("qunit-tests"),d=+new Date-c.started,e=c.stats.all-c.stats.bad,i=["Tests completed in ",d,' milliseconds.<br/><span class="passed">',e,'</span> tests of <span class="total">',c.stats.all,'</span> passed, <span class="failed">',c.stats.bad,"</span> failed."].join("");if(b)b.className=c.stats.bad?"qunit-fail":"qunit-pass";if(a)l("qunit-testresult").innerHTML=
i;if(c.altertitle&&typeof document!=="undefined"&&document.title)document.title=[c.stats.bad?"\u2716":"\u2714",document.title.replace(/^[\u2714\u2716] /i,"")].join(" ");f.done({failed:c.stats.bad,passed:e,total:c.stats.all,runtime:d})}}function t(){c.pollution=[];if(c.noglobals)for(var b in j)c.pollution.push(b)}function w(b,a){for(var d=b.slice(),e=0;e<d.length;e++)for(var c=0;c<a.length;c++)if(d[e]===a[c]){d.splice(e,1);e--;break}return d}function x(b,a,d){typeof console!=="undefined"&&console.error&&
console.warn?(console.error(b),console.error(a),console.warn(d.toString())):j.opera&&opera.postError&&opera.postError(b,a,d.toString)}function m(b,a){for(var d in a)a[d]===void 0?delete b[d]:b[d]=a[d];return b}function o(b,a,d){b.addEventListener?b.addEventListener(a,d,!1):b.attachEvent?b.attachEvent("on"+a,d):d()}function l(b){return!!(typeof document!=="undefined"&&document&&document.getElementById)&&document.getElementById(b)}function u(b){for(var a="",d,e=0;b[e];e++)d=b[e],d.nodeType===3||d.nodeType===
4?a+=d.nodeValue:d.nodeType!==8&&(a+=u(d.childNodes));return a}var y=typeof j.setTimeout!=="undefined",p;try{p=!!sessionStorage.getItem}catch(C){p=!1}var B=0,z=function(b,a,d,e,c,h){this.name=b;this.testName=a;this.expected=d;this.testEnvironmentArg=e;this.async=c;this.callback=h;this.assertions=[]};z.prototype={init:function(){var b=l("qunit-tests");if(b){var a=document.createElement("strong");a.innerHTML="Running "+this.name;var d=document.createElement("li");d.appendChild(a);d.className="running";
d.id=this.id="test-output"+B++;b.appendChild(d)}},setup:function(){if(this.module!=c.previousModule)c.previousModule&&f.moduleDone({name:c.previousModule,failed:c.moduleStats.bad,passed:c.moduleStats.all-c.moduleStats.bad,total:c.moduleStats.all}),c.previousModule=this.module,c.moduleStats={all:0,bad:0},f.moduleStart({name:this.module});c.current=this;this.testEnvironment=m({setup:function(){},teardown:function(){}},this.moduleTestEnvironment);this.testEnvironmentArg&&m(this.testEnvironment,this.testEnvironmentArg);
f.testStart({name:this.testName});f.current_testEnvironment=this.testEnvironment;try{c.pollution||t(),this.testEnvironment.setup.call(this.testEnvironment)}catch(b){f.ok(!1,"Setup failed on "+this.testName+": "+b.message)}},run:function(){this.async&&f.stop();if(c.notrycatch)this.callback.call(this.testEnvironment);else try{this.callback.call(this.testEnvironment)}catch(b){x("Test "+this.testName+" died, exception and test follows",b,this.callback),f.ok(!1,"Died on test #"+(this.assertions.length+
1)+": "+b.message+" - "+f.jsDump.parse(b)),t(),c.blocking&&start()}},teardown:function(){try{this.testEnvironment.teardown.call(this.testEnvironment);var b=c.pollution;t();var a=w(c.pollution,b);a.length>0&&ok(!1,"Introduced global variable(s): "+a.join(", "));var d=w(b,c.pollution);d.length>0&&ok(!1,"Deleted global variable(s): "+d.join(", "))}catch(e){f.ok(!1,"Teardown failed on "+this.testName+": "+e.message)}},finish:function(){this.expected&&this.expected!=this.assertions.length&&f.ok(!1,"Expected "+
this.expected+" assertions, but "+this.assertions.length+" were run");var b=0,a=0,d=l("qunit-tests");c.stats.all+=this.assertions.length;c.moduleStats.all+=this.assertions.length;if(d){for(var d=document.createElement("ol"),e=0;e<this.assertions.length;e++){var i=this.assertions[e],h=document.createElement("li");h.className=i.result?"pass":"fail";h.innerHTML=i.message||(i.result?"okay":"failed");d.appendChild(h);i.result?b++:(a++,c.stats.bad++,c.moduleStats.bad++)}f.config.reorder&&p&&(a?sessionStorage.setItem("qunit-"+
this.module+"-"+this.testName,a):sessionStorage.removeItem("qunit-"+this.module+"-"+this.testName));if(a==0)d.style.display="none";var g=document.createElement("strong");g.innerHTML=this.name+" <b class='counts'>(<b class='failed'>"+a+"</b>, <b class='passed'>"+b+"</b>, "+this.assertions.length+")</b>";b=document.createElement("a");b.innerHTML="Rerun";b.href=f.url({filter:u([g]).replace(/\([^)]+\)$/,"").replace(/(^\s*|\s*$)/g,"")});o(g,"click",function(){var a=g.nextSibling.nextSibling;a.style.display=
a.style.display==="none"?"block":"none"});o(g,"dblclick",function(a){a=a&&a.target?a.target:j.event.srcElement;if(a.nodeName.toLowerCase()=="span"||a.nodeName.toLowerCase()=="b")a=a.parentNode;if(j.location&&a.nodeName.toLowerCase()==="strong")j.location=f.url({filter:u([a]).replace(/\([^)]+\)$/,"").replace(/(^\s*|\s*$)/g,"")})});h=l(this.id);h.className=a?"fail":"pass";h.removeChild(h.firstChild);h.appendChild(g);h.appendChild(b);h.appendChild(d)}else for(e=0;e<this.assertions.length;e++)this.assertions[e].result||
(a++,c.stats.bad++,c.moduleStats.bad++);try{f.reset()}catch(k){x("reset() failed, following Test "+this.testName+", exception and reset fn follows",k,f.reset)}f.testDone({name:this.testName,failed:a,passed:this.assertions.length-a,total:this.assertions.length})},queue:function(){function b(){n(function(){a.setup()});n(function(){a.run()});n(function(){a.teardown()});n(function(){a.finish()})}var a=this;n(function(){a.init()});f.config.reorder&&p&&+sessionStorage.getItem("qunit-"+this.module+"-"+this.testName)?
b():n(b)}};var f={module:function(b,a){c.currentModule=b;c.currentModuleTestEnviroment=a},asyncTest:function(b,a,d){arguments.length===2&&(d=a,a=0);f.test(b,a,d,!0)},test:function(b,a,d,e){var f='<span class="test-name">'+b+"</span>",h;arguments.length===2&&(d=a,a=null);a&&typeof a==="object"&&(h=a,a=null);c.currentModule&&(f='<span class="module-name">'+c.currentModule+"</span>: "+f);var g;g=c.currentModule+": "+b;var k=c.filter,A=!1;if(k){var v=k.charAt(0)==="!";v&&(k=k.slice(1));g.indexOf(k)!==
-1?g=!v:(v&&(A=!0),g=A)}else g=!0;if(g)f=new z(f,b,a,h,e,d),f.module=c.currentModule,f.moduleTestEnvironment=c.currentModuleTestEnviroment,f.queue()},expect:function(b){c.current.expected=b},ok:function(b,a){var b=!!b,d={result:b,message:a},a=r(a);f.log(d);c.current.assertions.push({result:b,message:a})},equal:function(b,a,d){f.push(a==b,b,a,d)},notEqual:function(b,a,d){f.push(a!=b,b,a,d)},deepEqual:function(b,a,d){f.push(f.equiv(b,a),b,a,d)},notDeepEqual:function(b,a,d){f.push(!f.equiv(b,a),b,a,
d)},strictEqual:function(b,a,d){f.push(a===b,b,a,d)},notStrictEqual:function(b,a,d){f.push(a!==b,b,a,d)},raises:function(b,a,d){var e,c=!1;typeof a==="string"&&(d=a,a=null);try{b()}catch(h){e=h}e&&(a?f.objectType(a)==="regexp"?c=a.test(e):e instanceof a?c=!0:a.call({},e)===!0&&(c=!0):c=!0);f.ok(c,d)},start:function(){c.semaphore--;if(!(c.semaphore>0)){if(c.semaphore<0)c.semaphore=0;y?j.setTimeout(function(){if(!(c.semaphore>0))c.timeout&&clearTimeout(c.timeout),c.blocking=!1,s()},13):(c.blocking=
!1,s())}},stop:function(b){c.semaphore++;c.blocking=!0;if(b&&y)clearTimeout(c.timeout),c.timeout=j.setTimeout(function(){f.ok(!1,"Test timed out");f.start()},b)}};f.equals=f.equal;f.same=f.deepEqual;var c={queue:[],blocking:!0,hidepassed:!1,reorder:!0,altertitle:!0,urlConfig:["noglobals","notrycatch"]};(function(){var b=j.location||{search:"",protocol:"file:"},a=b.search.slice(1).split("&"),d=a.length,e={},i;if(a[0])for(var h=0;h<d;h++)i=a[h].split("="),i[0]=decodeURIComponent(i[0]),i[1]=i[1]?decodeURIComponent(i[1]):
!0,e[i[0]]=i[1];f.urlParams=e;c.filter=e.filter;f.isLocal=b.protocol==="file:"})();typeof exports==="undefined"||typeof require==="undefined"?(m(j,f),j.QUnit=f):(m(exports,f),exports.QUnit=f);m(f,{config:c,init:function(){m(c,{stats:{all:0,bad:0},moduleStats:{all:0,bad:0},started:+new Date,updateRate:1E3,blocking:!1,autostart:!0,autorun:!1,filter:"",queue:[],semaphore:0});var b=l("qunit-tests"),a=l("qunit-banner"),d=l("qunit-testresult");if(b)b.innerHTML="";if(a)a.className="";d&&d.parentNode.removeChild(d);
if(b)d=document.createElement("p"),d.id="qunit-testresult",d.className="result",b.parentNode.insertBefore(d,b),d.innerHTML="Running...<br/>&nbsp;"},reset:function(){if(j.jQuery)jQuery("#qunit-fixture").html(c.fixture);else{var b=l("qunit-fixture");if(b)b.innerHTML=c.fixture}},triggerEvent:function(b,a,d){document.createEvent?(d=document.createEvent("MouseEvents"),d.initMouseEvent(a,!0,!0,b.ownerDocument.defaultView,0,0,0,0,0,!1,!1,!1,!1,0,null),b.dispatchEvent(d)):b.fireEvent&&b.fireEvent("on"+a)},
is:function(b,a){return f.objectType(a)==b},objectType:function(b){if(typeof b==="undefined")return"undefined";if(b===null)return"null";var a=Object.prototype.toString.call(b).match(/^\[object\s(.*)\]$/)[1]||"";switch(a){case "Number":return isNaN(b)?"nan":"number";case "String":case "Boolean":case "Array":case "Date":case "RegExp":case "Function":return a.toLowerCase()}if(typeof b==="object")return"object"},push:function(b,a,d,e){var i={result:b,message:e,actual:a,expected:d},e=r(e)||(b?"okay":"failed"),
e='<span class="test-message">'+e+"</span>",d=r(f.jsDump.parse(d)),a=r(f.jsDump.parse(a)),e=e+'<table><tr class="test-expected"><th>Expected: </th><td><pre>'+d+"</pre></td></tr>";a!=d&&(e+='<tr class="test-actual"><th>Result: </th><td><pre>'+a+"</pre></td></tr>",e+='<tr class="test-diff"><th>Diff: </th><td><pre>'+f.diff(d,a)+"</pre></td></tr>");if(!b){a:{try{throw Error();}catch(h){if(h.stacktrace){a=h.stacktrace.split("\n")[6];break a}else if(h.stack){a=h.stack.split("\n")[4];break a}}a=void 0}if(a)i.source=
a,e+='<tr class="test-source"><th>Source: </th><td><pre>'+r(a)+"</pre></td></tr>"}e+="</table>";f.log(i);c.current.assertions.push({result:!!b,message:e})},url:function(b){var b=m(m({},f.urlParams),b),a="?",d;for(d in b)a+=encodeURIComponent(d)+"="+encodeURIComponent(b[d])+"&";return j.location.pathname+a.slice(0,-1)},extend:m,id:l,addEvent:o,begin:function(){},done:function(){},log:function(){},testStart:function(){},testDone:function(){},moduleStart:function(){},moduleDone:function(){}});if(typeof document===
"undefined"||document.readyState==="complete")c.autorun=!0;f.load=function(){f.begin({});var b=m({},c);f.init();m(c,b);c.blocking=!1;for(var b="",a=0,d;d=c.urlConfig[a];a++)c[d]=f.urlParams[d],b+='<label><input name="'+d+'" type="checkbox"'+(c[d]?' checked="checked"':"")+">"+d+"</label>";if(a=l("qunit-userAgent"))a.innerHTML=navigator.userAgent;if(a=l("qunit-header"))a.innerHTML='<a href="'+f.url({filter:void 0})+'"> '+a.innerHTML+"</a> "+b,o(a,"change",function(a){var b={};b[a.target.name]=a.target.checked?
!0:void 0;j.location=f.url(b)});if(b=l("qunit-testrunner-toolbar")){var e=document.createElement("input");e.type="checkbox";e.id="qunit-filter-pass";o(e,"click",function(){var a=document.getElementById("qunit-tests");if(e.checked)a.className+=" hidepass";else{var b=" "+a.className.replace(/[\n\t\r]/g," ")+" ";a.className=b.replace(/ hidepass /," ")}p&&(e.checked?sessionStorage.setItem("qunit-filter-passed-tests","true"):sessionStorage.removeItem("qunit-filter-passed-tests"))});if(c.hidepassed||p&&
sessionStorage.getItem("qunit-filter-passed-tests"))e.checked=!0,document.getElementById("qunit-tests").className+=" hidepass";b.appendChild(e);a=document.createElement("label");a.setAttribute("for","qunit-filter-pass");a.innerHTML="Hide passed tests";b.appendChild(a)}if(b=l("qunit-fixture"))c.fixture=b.innerHTML;c.autostart&&f.start()};o(j,"load",f.load);f.equiv=function(){var b,a=[],d=[],e=function(){function e(a,g){return a instanceof g.constructor||g instanceof a.constructor?g==a:g===a}return{string:e,
"boolean":e,number:e,"null":e,undefined:e,nan:function(a){return isNaN(a)},date:function(a,g){return f.objectType(a)==="date"&&g.valueOf()===a.valueOf()},regexp:function(a,g){return f.objectType(a)==="regexp"&&g.source===a.source&&g.global===a.global&&g.ignoreCase===a.ignoreCase&&g.multiline===a.multiline},"function":function(){var b=a[a.length-1];return b!==Object&&typeof b!=="undefined"},array:function(a,g){var e,c,i,q;if(f.objectType(a)!=="array")return!1;q=g.length;if(q!==a.length)return!1;d.push(g);
for(e=0;e<q;e++){i=!1;for(c=0;c<d.length;c++)d[c]===g[e]&&(i=!0);if(!i&&!b(g[e],a[e]))return d.pop(),!1}d.pop();return!0},object:function(e,g){var c,f,i,q=!0,j=[],l=[];if(g.constructor!==e.constructor)return!1;a.push(g.constructor);d.push(g);for(c in g){i=!1;for(f=0;f<d.length;f++)d[f]===g[c]&&(i=!0);j.push(c);if(!i&&!b(g[c],e[c])){q=!1;break}}a.pop();d.pop();for(c in e)l.push(c);return q&&b(j.sort(),l.sort())}}}();return b=function(){var a=Array.prototype.slice.apply(arguments);if(a.length<2)a=!0;
else{var b;if(a[0]===a[1])b=!0;else if(a[0]===null||a[1]===null||typeof a[0]==="undefined"||typeof a[1]==="undefined"||f.objectType(a[0])!==f.objectType(a[1]))b=!1;else{b=[a[1],a[0]];var g=f.objectType(a[0]);b=g?f.objectType(e[g])==="function"?e[g].apply(e,b):e[g]:void 0}a=b&&arguments.callee.apply(this,a.splice(1,a.length-1))}return a}}();f.jsDump=function(){function b(a){return'"'+a.toString().replace(/"/g,'\\"')+'"'}function a(a){return a+""}function d(a,b,d){var e=h.separator(),c=h.indent(),f=
h.indent(1);b.join&&(b=b.join(","+e+f));return!b?a+d:[a,f+b,c+d].join(e)}function e(a,b){var e=a.length,c=Array(e);for(this.up();e--;)c[e]=this.parse(a[e],void 0,b);this.down();return d("[",c,"]")}var c=/^function (\w+)/,h={parse:function(a,b,d){var d=d||[],e=this.parsers[b||this.typeOf(a)],b=typeof e,c;a:if(c=d,c.indexOf)c=c.indexOf(a);else{for(var f=0,h=c.length;f<h;f++)if(c[f]===a){c=f;break a}c=-1}if(c!=-1)return"recursion("+(c-d.length)+")";return b=="function"?(d.push(a),a=e.call(this,a,d),
d.pop(),a):b=="string"?e:this.parsers.error},typeOf:function(a){return a===null?"null":typeof a==="undefined"?"undefined":f.is("RegExp",a)?"regexp":f.is("Date",a)?"date":f.is("Function",a)?"function":typeof a.setInterval!==void 0&&typeof a.document!=="undefined"&&typeof a.nodeType==="undefined"?"window":a.nodeType===9?"document":a.nodeType?"node":typeof a==="object"&&typeof a.length==="number"&&a.length>=0?"array":typeof a},separator:function(){return this.multiline?this.HTML?"<br />":"\n":this.HTML?
"&nbsp;":" "},indent:function(a){if(!this.multiline)return"";var b=this.indentChar;this.HTML&&(b=b.replace(/\t/g,"   ").replace(/ /g,"&nbsp;"));return Array(this._depth_+(a||0)).join(b)},up:function(a){this._depth_+=a||1},down:function(a){this._depth_-=a||1},setParser:function(a,b){this.parsers[a]=b},quote:b,literal:a,join:d,_depth_:1,parsers:{window:"[Window]",document:"[Document]",error:"[ERROR]",unknown:"[Unknown]","null":"null",undefined:"undefined","function":function(a){var b="function",e="name"in
a?a.name:(c.exec(a)||[])[1];e&&(b+=" "+e);b+="(";b=[b,f.jsDump.parse(a,"functionArgs"),"){"].join("");return d(b,f.jsDump.parse(a,"functionCode"),"}")},array:e,nodelist:e,arguments:e,object:function(a,b){var e=[];f.jsDump.up();for(var c in a){var h=a[c];e.push(f.jsDump.parse(c,"key")+": "+f.jsDump.parse(h,void 0,b))}f.jsDump.down();return d("{",e,"}")},node:function(a){var b=f.jsDump.HTML?"&lt;":"<",d=f.jsDump.HTML?"&gt;":">",e=a.nodeName.toLowerCase(),c=b+e,h;for(h in f.jsDump.DOMAttrs){var i=a[f.jsDump.DOMAttrs[h]];
i&&(c+=" "+h+"="+f.jsDump.parse(i,"attribute"))}return c+d+b+"/"+e+d},functionArgs:function(a){a=a.length;if(!a)return"";for(var b=Array(a);a--;)b[a]=String.fromCharCode(97+a);return" "+b.join(", ")+" "},key:b,functionCode:"[code]",attribute:b,string:b,date:b,regexp:a,number:a,"boolean":a},DOMAttrs:{id:"id",name:"name","class":"className"},HTML:!1,indentChar:"  ",multiline:!0};return h}();f.diff=function(){return function(b,a){for(var b=b.replace(/\s+$/,""),a=a.replace(/\s+$/,""),d=b==""?[]:b.split(/\s+/),
e=a==""?[]:a.split(/\s+/),c={},f={},g=0;g<e.length;g++)c[e[g]]==null&&(c[e[g]]={rows:[],o:null}),c[e[g]].rows.push(g);for(g=0;g<d.length;g++)f[d[g]]==null&&(f[d[g]]={rows:[],n:null}),f[d[g]].rows.push(g);for(g in c)c[g].rows.length==1&&typeof f[g]!="undefined"&&f[g].rows.length==1&&(e[c[g].rows[0]]={text:e[c[g].rows[0]],row:f[g].rows[0]},d[f[g].rows[0]]={text:d[f[g].rows[0]],row:c[g].rows[0]});for(g=0;g<e.length-1;g++)e[g].text!=null&&e[g+1].text==null&&e[g].row+1<d.length&&d[e[g].row+1].text==null&&
e[g+1]==d[e[g].row+1]&&(e[g+1]={text:e[g+1],row:e[g].row+1},d[e[g].row+1]={text:d[e[g].row+1],row:g+1});for(g=e.length-1;g>0;g--)e[g].text!=null&&e[g-1].text==null&&e[g].row>0&&d[e[g].row-1].text==null&&e[g-1]==d[e[g].row-1]&&(e[g-1]={text:e[g-1],row:e[g].row-1},d[e[g].row-1]={text:d[e[g].row-1],row:g-1});c="";f=b.match(/\s+/g);f==null?f=[" "]:f.push(" ");g=a.match(/\s+/g);g==null?g=[" "]:g.push(" ");if(e.length==0)for(var k=0;k<d.length;k++)c+="<del>"+d[k]+f[k]+"</del>";else{if(e[0].text==null)for(a=
0;a<d.length&&d[a].text==null;a++)c+="<del>"+d[a]+f[a]+"</del>";for(k=0;k<e.length;k++)if(e[k].text==null)c+="<ins>"+e[k]+g[k]+"</ins>";else{for(var j="",a=e[k].row+1;a<d.length&&d[a].text==null;a++)j+="<del>"+d[a]+f[a]+"</del>";c+=" "+e[k].text+g[k]+j}}return c}}()})(this);
