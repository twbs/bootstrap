@use "sass:map";
@use "config" as *;
@use "colors" as *;
@use "variables" as *;
@use "mixins/border-radius" as *;
@use "mixins/box-shadow" as *;
@use "mixins/gradients" as *;

// scss-docs-start dropdown-variables
$dropdown-gap:                      $spacer * .125 !default;
$dropdown-min-width:                10rem !default;
$dropdown-padding-x:                .25rem !default;
$dropdown-padding-y:                .25rem !default;
$dropdown-spacer:                   .125rem !default;
$dropdown-font-size:                $font-size-base !default;
$dropdown-color:                    var(--#{$prefix}fg-body) !default;
$dropdown-bg:                       var(--#{$prefix}bg-body) !default;
$dropdown-border-color:             var(--#{$prefix}border-color-translucent) !default;
$dropdown-border-radius:            var(--#{$prefix}border-radius-lg) !default;
$dropdown-border-width:             var(--#{$prefix}border-width) !default;
$dropdown-inner-border-radius:      calc(#{$dropdown-border-radius} - #{$dropdown-border-width}) !default;
$dropdown-box-shadow:               var(--#{$prefix}box-shadow) !default;

$dropdown-divider-bg:               $dropdown-border-color !default;
$dropdown-divider-margin-y:         $spacer * .125 !default;
$dropdown-divider-margin-x:         $spacer * .25 !default;

$dropdown-link-color:               var(--#{$prefix}fg-body) !default;
$dropdown-link-hover-color:         $dropdown-link-color !default;
$dropdown-link-hover-bg:            var(--#{$prefix}bg-1) !default;

$dropdown-link-active-color:        $component-active-color !default;
$dropdown-link-active-bg:           $component-active-bg !default;

$dropdown-link-disabled-color:      var(--#{$prefix}fg-3) !default;

$dropdown-item-padding-y:           $spacer * .25 !default;
$dropdown-item-padding-x:           $spacer * .75 !default;
$dropdown-item-border-radius:       var(--#{$prefix}border-radius) !default;
$dropdown-item-gap:                 $spacer * .5 !default;

$dropdown-header-color:             var(--#{$prefix}gray-600) !default;
$dropdown-header-padding-x:         $dropdown-item-padding-x !default;
$dropdown-header-padding-y:         $dropdown-padding-y !default;
// scss-docs-end dropdown-variables

// scss-docs-start dropdown-dark-variables
$dropdown-dark-color:               var(--#{$prefix}gray-300) !default;
$dropdown-dark-bg:                  var(--#{$prefix}gray-900) !default;
$dropdown-dark-border-color:        $dropdown-border-color !default;
$dropdown-dark-divider-bg:          $dropdown-divider-bg !default;
$dropdown-dark-box-shadow:          null !default;
$dropdown-dark-link-color:          $dropdown-dark-color !default;
$dropdown-dark-link-hover-color:    $white !default;
$dropdown-dark-link-hover-bg:       rgba($white, .15) !default;
$dropdown-dark-link-active-color:   $dropdown-link-active-color !default;
$dropdown-dark-link-active-bg:      $dropdown-link-active-bg !default;
$dropdown-dark-link-disabled-color: var(--#{$prefix}gray-500) !default;
$dropdown-dark-header-color:        var(--#{$prefix}gray-500) !default;
// scss-docs-end dropdown-dark-variables

@layer components {
  // The dropdown wrapper (`<div>`)
  .dropdown {
    position: relative;
  }

  // The dropdown menu
  .dropdown-menu {
    // scss-docs-start dropdown-css-vars
    --#{$prefix}dropdown-zindex: #{$zindex-dropdown};
    --#{$prefix}dropdown-gap: #{$dropdown-gap};
    --#{$prefix}dropdown-min-width: #{$dropdown-min-width};
    --#{$prefix}dropdown-padding-x: #{$dropdown-padding-x};
    --#{$prefix}dropdown-padding-y: #{$dropdown-padding-y};
    --#{$prefix}dropdown-spacer: #{$dropdown-spacer};
    --#{$prefix}dropdown-font-size: #{$dropdown-font-size};
    --#{$prefix}dropdown-color: #{$dropdown-color};
    --#{$prefix}dropdown-bg: #{$dropdown-bg};
    --#{$prefix}dropdown-border-color: #{$dropdown-border-color};
    --#{$prefix}dropdown-border-radius: #{$dropdown-border-radius};
    --#{$prefix}dropdown-border-width: #{$dropdown-border-width};
    --#{$prefix}dropdown-inner-border-radius: #{$dropdown-inner-border-radius};
    --#{$prefix}dropdown-divider-bg: #{$dropdown-divider-bg};
    --#{$prefix}dropdown-divider-margin-y: #{$dropdown-divider-margin-y};
    --#{$prefix}dropdown-divider-margin-x: #{$dropdown-divider-margin-x};
    --#{$prefix}dropdown-box-shadow: #{$dropdown-box-shadow};
    --#{$prefix}dropdown-link-color: #{$dropdown-link-color};
    --#{$prefix}dropdown-link-hover-color: #{$dropdown-link-hover-color};
    --#{$prefix}dropdown-link-hover-bg: #{$dropdown-link-hover-bg};
    --#{$prefix}dropdown-link-active-color: #{$dropdown-link-active-color};
    --#{$prefix}dropdown-link-active-bg: #{$dropdown-link-active-bg};
    --#{$prefix}dropdown-link-disabled-color: #{$dropdown-link-disabled-color};
    --#{$prefix}dropdown-item-gap: #{$dropdown-item-gap};
    --#{$prefix}dropdown-item-padding-x: #{$dropdown-item-padding-x};
    --#{$prefix}dropdown-item-padding-y: #{$dropdown-item-padding-y};
    --#{$prefix}dropdown-item-border-radius: #{$dropdown-item-border-radius};
    --#{$prefix}dropdown-header-color: #{$dropdown-header-color};
    --#{$prefix}dropdown-header-padding-x: #{$dropdown-header-padding-x};
    --#{$prefix}dropdown-header-padding-y: #{$dropdown-header-padding-y};
    // scss-docs-end dropdown-css-vars

    position: absolute;
    z-index: var(--#{$prefix}dropdown-zindex);
    display: none; // none by default, but flex on "open" of the menu
    flex-direction: column;
    gap: var(--#{$prefix}dropdown-gap);
    min-width: var(--#{$prefix}dropdown-min-width);
    padding: var(--#{$prefix}dropdown-padding-y) var(--#{$prefix}dropdown-padding-x);
    margin: 0; // Override default margin of ul
    font-size: var(--#{$prefix}dropdown-font-size);
    color: var(--#{$prefix}dropdown-color);
    text-align: start; // Ensures proper alignment if parent has it changed (e.g., modal footer)
    list-style: none;
    background-color: var(--#{$prefix}dropdown-bg);
    background-clip: padding-box;
    border: var(--#{$prefix}dropdown-border-width) solid var(--#{$prefix}dropdown-border-color);
    @include border-radius(var(--#{$prefix}dropdown-border-radius));
    @include box-shadow(var(--#{$prefix}dropdown-box-shadow));

    @if $dropdown-padding-y == 0 {
      > .dropdown-item:first-child,
      > li:first-child .dropdown-item {
        @include border-top-radius(var(--#{$prefix}dropdown-inner-border-radius));
      }
      > .dropdown-item:last-child,
      > li:last-child .dropdown-item {
        @include border-bottom-radius(var(--#{$prefix}dropdown-inner-border-radius));
      }
    }
  }

  .dropdown-menu.show {
    display: flex;
  }

  // Dividers (basically an `<hr>`) within the dropdown
  .dropdown-divider {
    height: 0;
    margin: var(--#{$prefix}dropdown-divider-margin-y) var(--#{$prefix}dropdown-divider-margin-x);
    overflow: hidden;
    border-block-start: 1px solid var(--#{$prefix}dropdown-divider-bg);
    opacity: 1;
  }

  // Links, buttons, and more within the dropdown menu
  //
  // `<button>`-specific styles are denoted with `// For <button>s`
  .dropdown-item {
    display: flex;
    gap: var(--#{$prefix}dropdown-item-gap);
    align-items: center;
    width: 100%; // For `<button>`s
    padding: var(--#{$prefix}dropdown-item-padding-y) var(--#{$prefix}dropdown-item-padding-x);
    font-weight: $font-weight-normal;
    color: var(--#{$prefix}dropdown-link-color);
    text-align: inherit; // For `<button>`s
    text-decoration: none;
    white-space: nowrap; // prevent links from randomly breaking onto new lines
    background-color: transparent; // For `<button>`s
    border: 0; // For `<button>`s
    @include border-radius(var(--#{$prefix}dropdown-item-border-radius, 0));

    &:hover,
    &:focus {
      color: var(--#{$prefix}dropdown-link-hover-color);
      @include gradient-bg(var(--#{$prefix}dropdown-link-hover-bg));
    }

    &.active,
    &:active {
      color: var(--#{$prefix}dropdown-link-active-color);
      @include gradient-bg(var(--#{$prefix}dropdown-link-active-bg));
    }

    &.disabled,
    &:disabled {
      color: var(--#{$prefix}dropdown-link-disabled-color);
      pointer-events: none;
      background-color: transparent;
      // Remove CSS gradients if they're enabled
      background-image: if($enable-gradients, none, null);
    }
  }

  // Dropdown section headers
  .dropdown-header {
    display: block;
    padding: var(--#{$prefix}dropdown-header-padding-y) var(--#{$prefix}dropdown-header-padding-x);
    margin-bottom: 0; // for use with heading elements
    font-size: $font-size-sm;
    color: var(--#{$prefix}dropdown-header-color);
    white-space: nowrap; // as with > li > a
  }

  // Dropdown text
  .dropdown-item-text {
    display: block;
    padding: var(--#{$prefix}dropdown-item-padding-y) var(--#{$prefix}dropdown-item-padding-x);
    color: var(--#{$prefix}fg-2);
  }

  // Dark dropdowns
  .dropdown-menu-dark {
    // scss-docs-start dropdown-dark-css-vars
    --#{$prefix}dropdown-color: #{$dropdown-dark-color};
    --#{$prefix}dropdown-bg: #{$dropdown-dark-bg};
    --#{$prefix}dropdown-border-color: #{$dropdown-dark-border-color};
    --#{$prefix}dropdown-box-shadow: #{$dropdown-dark-box-shadow};
    --#{$prefix}dropdown-link-color: #{$dropdown-dark-link-color};
    --#{$prefix}dropdown-link-hover-color: #{$dropdown-dark-link-hover-color};
    --#{$prefix}dropdown-divider-bg: #{$dropdown-dark-divider-bg};
    --#{$prefix}dropdown-link-hover-bg: #{$dropdown-dark-link-hover-bg};
    --#{$prefix}dropdown-link-active-color: #{$dropdown-dark-link-active-color};
    --#{$prefix}dropdown-link-active-bg: #{$dropdown-dark-link-active-bg};
    --#{$prefix}dropdown-link-disabled-color: #{$dropdown-dark-link-disabled-color};
    --#{$prefix}dropdown-header-color: #{$dropdown-dark-header-color};
    // scss-docs-end dropdown-dark-css-vars
  }
}
