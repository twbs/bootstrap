{"version":3,"file":"popover.js","sources":["../../src/popover.js"],"sourcesContent":["import $ from 'jquery'\nimport Tooltip from './tooltip'\nimport Util from './util'\n\n/**\n * --------------------------------------------------------------------------\n * Bootstrap (v4.0.0-alpha.6): popover.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * --------------------------------------------------------------------------\n */\n\n/**\n * ------------------------------------------------------------------------\n * Constants\n * ------------------------------------------------------------------------\n */\n\nconst NAME                = 'popover'\nconst VERSION             = '4.0.0-alpha.6'\nconst DATA_KEY            = 'bs.popover'\nconst EVENT_KEY           = `.${DATA_KEY}`\nconst JQUERY_NO_CONFLICT  = $.fn[NAME]\nconst CLASS_PREFIX        = 'bs-popover'\nconst BSCLS_PREFIX_REGEX  = new RegExp(`(^|\\\\s)${CLASS_PREFIX}\\\\S+`, 'g')\n\nconst Default = $.extend({}, Tooltip.Default, {\n  placement : 'right',\n  trigger   : 'click',\n  content   : '',\n  template  : '<div class=\"popover\" role=\"tooltip\">'\n            + '<div class=\"arrow\"></div>'\n            + '<h3 class=\"popover-header\"></h3>'\n            + '<div class=\"popover-body\"></div></div>'\n})\n\nconst DefaultType = $.extend({}, Tooltip.DefaultType, {\n  content : '(string|element|function)'\n})\n\nconst ClassName = {\n  FADE : 'fade',\n  SHOW : 'show'\n}\n\nconst Selector = {\n  TITLE   : '.popover-header',\n  CONTENT : '.popover-body'\n}\n\nconst Event = {\n  HIDE       : `hide${EVENT_KEY}`,\n  HIDDEN     : `hidden${EVENT_KEY}`,\n  SHOW       : `show${EVENT_KEY}`,\n  SHOWN      : `shown${EVENT_KEY}`,\n  INSERTED   : `inserted${EVENT_KEY}`,\n  CLICK      : `click${EVENT_KEY}`,\n  FOCUSIN    : `focusin${EVENT_KEY}`,\n  FOCUSOUT   : `focusout${EVENT_KEY}`,\n  MOUSEENTER : `mouseenter${EVENT_KEY}`,\n  MOUSELEAVE : `mouseleave${EVENT_KEY}`\n}\n\n\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\n\nexport default class Popover extends Tooltip {\n\n  // getters\n\n  static get VERSION() {\n    return VERSION\n  }\n\n  static get Default() {\n    return Default\n  }\n\n  static get NAME() {\n    return NAME\n  }\n\n  static get DATA_KEY() {\n    return DATA_KEY\n  }\n\n  static get Event() {\n    return Event\n  }\n\n  static get EVENT_KEY() {\n    return EVENT_KEY\n  }\n\n  static get DefaultType() {\n    return DefaultType\n  }\n\n\n  // overrides\n\n  isWithContent() {\n    return this.getTitle() || this._getContent()\n  }\n\n  addAttachmentClass(attachment) {\n    $(this.getTipElement()).addClass(`${CLASS_PREFIX}-${attachment}`)\n  }\n\n  getTipElement() {\n    return this.tip = this.tip || $(this.config.template)[0]\n  }\n\n  setContent() {\n    const $tip = $(this.getTipElement())\n\n    // we use append for html objects to maintain js events\n    this.setElementContent($tip.find(Selector.TITLE), this.getTitle())\n    this.setElementContent($tip.find(Selector.CONTENT), this._getContent())\n\n    $tip.removeClass(`${ClassName.FADE} ${ClassName.SHOW}`)\n  }\n\n  // private\n\n  _getContent() {\n    return this.element.getAttribute('data-content')\n      || (typeof this.config.content === 'function' ?\n            this.config.content.call(this.element) :\n            this.config.content)\n  }\n\n  _cleanTipClass() {\n    const $tip = $(this.getTipElement())\n    const tabClass = $tip.attr('class').match(BSCLS_PREFIX_REGEX)\n    if (tabClass !== null && tabClass.length > 0) {\n      $tip.removeClass(tabClass.join(''))\n    }\n  }\n\n\n  // static\n\n  static _jQueryInterface(config) {\n    return this.each(function () {\n      let data      = $(this).data(DATA_KEY)\n      const _config = typeof config === 'object' ? config : null\n\n      if (!data && /destroy|hide/.test(config)) {\n        return\n      }\n\n      if (!data) {\n        data = new Popover(this, _config)\n        $(this).data(DATA_KEY, data)\n      }\n\n      if (typeof config === 'string') {\n        if (data[config] === undefined) {\n          throw new Error(`No method named \"${config}\"`)\n        }\n        data[config]()\n      }\n    })\n  }\n\n  static _init() {\n    /**\n     * ------------------------------------------------------------------------\n     * jQuery\n     * ------------------------------------------------------------------------\n     */\n\n    $.fn[NAME]             = Popover._jQueryInterface\n    $.fn[NAME].Constructor = Popover\n    $.fn[NAME].noConflict  = function () {\n      $.fn[NAME] = JQUERY_NO_CONFLICT\n      return Popover._jQueryInterface\n    }\n  }\n}\n\nif (!Util.nodeEnv()) {\n  $(document).ready(() => {\n    Popover._init()\n  })\n}\n"],"names":["NAME","VERSION","DATA_KEY","EVENT_KEY","JQUERY_NO_CONFLICT","$","fn","CLASS_PREFIX","BSCLS_PREFIX_REGEX","RegExp","Default","extend","Tooltip","DefaultType","ClassName","Selector","Event","Popover","getTitle","_getContent","attachment","getTipElement","addClass","tip","config","template","$tip","setElementContent","find","TITLE","CONTENT","removeClass","FADE","SHOW","element","getAttribute","content","call","tabClass","attr","match","length","join","each","data","_config","test","undefined","Error","_jQueryInterface","Constructor","noConflict","Util","nodeEnv","document","ready","_init"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAIA;;;;;;;;;;;;;AAaA,IAAMA,OAAsB,SAA5B;AACA,IAAMC,UAAsB,eAA5B;AACA,IAAMC,WAAsB,YAA5B;AACA,IAAMC,kBAA0BD,QAAhC;AACA,IAAME,qBAAsBC,EAAEC,EAAF,CAAKN,IAAL,CAA5B;AACA,IAAMO,eAAsB,YAA5B;AACA,IAAMC,qBAAsB,IAAIC,MAAJ,aAAqBF,YAArB,WAAyC,GAAzC,CAA5B;;AAEA,IAAMG,UAAUL,EAAEM,MAAF,CAAS,EAAT,EAAaC,QAAQF,OAArB,EAA8B;aAChC,OADgC;WAEhC,OAFgC;WAGhC,EAHgC;YAIhC,yCACA,2BADA,GAEA,kCAFA,GAGA;CAPE,CAAhB;;AAUA,IAAMG,cAAcR,EAAEM,MAAF,CAAS,EAAT,EAAaC,QAAQC,WAArB,EAAkC;WAC1C;CADQ,CAApB;;AAIA,IAAMC,YAAY;QACT,MADS;QAET;CAFT;;AAKA,IAAMC,WAAW;SACL,iBADK;WAEL;CAFZ;;AAKA,IAAMC,QAAQ;iBACQb,SADR;qBAEUA,SAFV;iBAGQA,SAHR;mBAISA,SAJT;yBAKYA,SALZ;mBAMSA,SANT;uBAOWA,SAPX;yBAQYA,SARZ;6BAScA,SATd;6BAUcA;;;;;;;;CAV5B;IAoBqBc;;;;;;;;;;;;;;oCAmCH;aACP,KAAKC,QAAL,MAAmB,KAAKC,WAAL,EAA1B;;;;uCAGiBC,YAAY;QAC3B,KAAKC,aAAL,EAAF,EAAwBC,QAAxB,CAAoCf,YAApC,SAAoDa,UAApD;;;;oCAGc;aACP,KAAKG,GAAL,GAAW,KAAKA,GAAL,IAAYlB,EAAE,KAAKmB,MAAL,CAAYC,QAAd,EAAwB,CAAxB,CAA9B;;;;iCAGW;UACLC,OAAOrB,EAAE,KAAKgB,aAAL,EAAF,CAAb;;;WAGKM,iBAAL,CAAuBD,KAAKE,IAAL,CAAUb,SAASc,KAAnB,CAAvB,EAAkD,KAAKX,QAAL,EAAlD;WACKS,iBAAL,CAAuBD,KAAKE,IAAL,CAAUb,SAASe,OAAnB,CAAvB,EAAoD,KAAKX,WAAL,EAApD;;WAEKY,WAAL,CAAoBjB,UAAUkB,IAA9B,SAAsClB,UAAUmB,IAAhD;;;;;;;kCAKY;aACL,KAAKC,OAAL,CAAaC,YAAb,CAA0B,cAA1B,MACD,OAAO,KAAKX,MAAL,CAAYY,OAAnB,KAA+B,UAA/B,GACE,KAAKZ,MAAL,CAAYY,OAAZ,CAAoBC,IAApB,CAAyB,KAAKH,OAA9B,CADF,GAEE,KAAKV,MAAL,CAAYY,OAHb,CAAP;;;;qCAMe;UACTV,OAAOrB,EAAE,KAAKgB,aAAL,EAAF,CAAb;UACMiB,WAAWZ,KAAKa,IAAL,CAAU,OAAV,EAAmBC,KAAnB,CAAyBhC,kBAAzB,CAAjB;UACI8B,aAAa,IAAb,IAAqBA,SAASG,MAAT,GAAkB,CAA3C,EAA8C;aACvCV,WAAL,CAAiBO,SAASI,IAAT,CAAc,EAAd,CAAjB;;;;;;;;qCAOoBlB,QAAQ;aACvB,KAAKmB,IAAL,CAAU,YAAY;YACvBC,OAAYvC,EAAE,IAAF,EAAQuC,IAAR,CAAa1C,QAAb,CAAhB;YACM2C,UAAU,QAAOrB,MAAP,yCAAOA,MAAP,OAAkB,QAAlB,GAA6BA,MAA7B,GAAsC,IAAtD;;YAEI,CAACoB,IAAD,IAAS,eAAeE,IAAf,CAAoBtB,MAApB,CAAb,EAA0C;;;;YAItC,CAACoB,IAAL,EAAW;iBACF,IAAI3B,OAAJ,CAAY,IAAZ,EAAkB4B,OAAlB,CAAP;YACE,IAAF,EAAQD,IAAR,CAAa1C,QAAb,EAAuB0C,IAAvB;;;YAGE,OAAOpB,MAAP,KAAkB,QAAtB,EAAgC;cAC1BoB,KAAKpB,MAAL,MAAiBuB,SAArB,EAAgC;kBACxB,IAAIC,KAAJ,uBAA8BxB,MAA9B,OAAN;;eAEGA,MAAL;;OAjBG,CAAP;;;;4BAsBa;;;;;;;QAOXlB,EAAF,CAAKN,IAAL,IAAyBiB,QAAQgC,gBAAjC;QACE3C,EAAF,CAAKN,IAAL,EAAWkD,WAAX,GAAyBjC,OAAzB;QACEX,EAAF,CAAKN,IAAL,EAAWmD,UAAX,GAAyB,YAAY;UACjC7C,EAAF,CAAKN,IAAL,IAAaI,kBAAb;eACOa,QAAQgC,gBAAf;OAFF;;;;;;;;2BAzGmB;aACZhD,OAAP;;;;2BAGmB;aACZS,OAAP;;;;2BAGgB;aACTV,IAAP;;;;2BAGoB;aACbE,QAAP;;;;2BAGiB;aACVc,KAAP;;;;2BAGqB;aACdb,SAAP;;;;2BAGuB;aAChBU,WAAP;;;;EA7BiCD;;AAoHrC,IAAI,CAACwC,KAAKC,OAAL,EAAL,EAAqB;IACjBC,QAAF,EAAYC,KAAZ,CAAkB,YAAM;YACdC,KAAR;GADF;;;;;"}