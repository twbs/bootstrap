{"version":3,"file":"button.js","sources":["../../src/button.js"],"sourcesContent":["import $ from 'jquery'\nimport Util from './util'\n\n/**\n * --------------------------------------------------------------------------\n * Bootstrap (v4.0.0-alpha.6): button.js\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * --------------------------------------------------------------------------\n */\n\n/**\n * ------------------------------------------------------------------------\n * Constants\n * ------------------------------------------------------------------------\n */\n\nconst NAME                = 'button'\nconst VERSION             = '4.0.0-alpha.6'\nconst DATA_KEY            = 'bs.button'\nconst EVENT_KEY           = `.${DATA_KEY}`\nconst DATA_API_KEY        = '.data-api'\nconst JQUERY_NO_CONFLICT  = $.fn[NAME]\n\nconst ClassName = {\n  ACTIVE : 'active',\n  BUTTON : 'btn',\n  FOCUS  : 'focus'\n}\n\nconst Selector = {\n  DATA_TOGGLE_CARROT : '[data-toggle^=\"button\"]',\n  DATA_TOGGLE        : '[data-toggle=\"buttons\"]',\n  INPUT              : 'input',\n  ACTIVE             : '.active',\n  BUTTON             : '.btn'\n}\n\nconst Event = {\n  CLICK_DATA_API      : `click${EVENT_KEY}${DATA_API_KEY}`,\n  FOCUS_BLUR_DATA_API : `focus${EVENT_KEY}${DATA_API_KEY} `\n                      + `blur${EVENT_KEY}${DATA_API_KEY}`\n}\n\n\n/**\n * ------------------------------------------------------------------------\n * Class Definition\n * ------------------------------------------------------------------------\n */\n\nexport default class Button {\n\n  constructor(element) {\n    this._element = element\n  }\n\n\n  // getters\n\n  static get VERSION() {\n    return VERSION\n  }\n\n\n  // public\n\n  toggle() {\n    let triggerChangeEvent = true\n    let addAriaPressed = true\n    const rootElement      = $(this._element).closest(\n      Selector.DATA_TOGGLE\n    )[0]\n\n    if (rootElement) {\n      const input = $(this._element).find(Selector.INPUT)[0]\n\n      if (input) {\n        if (input.type === 'radio') {\n          if (input.checked &&\n            $(this._element).hasClass(ClassName.ACTIVE)) {\n            triggerChangeEvent = false\n\n          } else {\n            const activeElement = $(rootElement).find(Selector.ACTIVE)[0]\n\n            if (activeElement) {\n              $(activeElement).removeClass(ClassName.ACTIVE)\n            }\n          }\n        }\n\n        if (triggerChangeEvent) {\n          if (input.hasAttribute('disabled') ||\n            rootElement.hasAttribute('disabled') ||\n            input.classList.contains('disabled') ||\n            rootElement.classList.contains('disabled')) {\n            return\n          }\n          input.checked = !$(this._element).hasClass(ClassName.ACTIVE)\n          $(input).trigger('change')\n        }\n\n        input.focus()\n        addAriaPressed = false\n      }\n\n    }\n\n    if (addAriaPressed) {\n      this._element.setAttribute('aria-pressed',\n        !$(this._element).hasClass(ClassName.ACTIVE))\n    }\n\n    if (triggerChangeEvent) {\n      $(this._element).toggleClass(ClassName.ACTIVE)\n    }\n  }\n\n  dispose() {\n    $.removeData(this._element, DATA_KEY)\n    this._element = null\n  }\n\n\n  // static\n\n  static _jQueryInterface(config) {\n    return this.each(function () {\n      let data = $(this).data(DATA_KEY)\n\n      if (!data) {\n        data = new Button(this)\n        $(this).data(DATA_KEY, data)\n      }\n\n      if (config === 'toggle') {\n        data[config]()\n      }\n    })\n  }\n\n  static _init() {\n    /**\n     * ------------------------------------------------------------------------\n     * Data Api implementation\n     * ------------------------------------------------------------------------\n     */\n\n    $(document)\n      .on(Event.CLICK_DATA_API, Selector.DATA_TOGGLE_CARROT, (event) => {\n        event.preventDefault()\n\n        let button = event.target\n\n        if (!$(button).hasClass(ClassName.BUTTON)) {\n          button = $(button).closest(Selector.BUTTON)\n        }\n\n        Button._jQueryInterface.call($(button), 'toggle')\n      })\n      .on(Event.FOCUS_BLUR_DATA_API, Selector.DATA_TOGGLE_CARROT, (event) => {\n        const button = $(event.target).closest(Selector.BUTTON)[0]\n        $(button).toggleClass(ClassName.FOCUS, /^focus(in)?$/.test(event.type))\n      })\n\n    /**\n     * ------------------------------------------------------------------------\n     * jQuery\n     * ------------------------------------------------------------------------\n     */\n\n    $.fn[NAME]             = Button._jQueryInterface\n    $.fn[NAME].Constructor = Button\n    $.fn[NAME].noConflict  = function () {\n      $.fn[NAME] = JQUERY_NO_CONFLICT\n      return Button._jQueryInterface\n    }\n  }\n}\n\nif (!Util.nodeEnv()) {\n  $(document).ready(() => {\n    Button._init()\n  })\n}\n"],"names":["NAME","VERSION","DATA_KEY","EVENT_KEY","DATA_API_KEY","JQUERY_NO_CONFLICT","$","fn","ClassName","Selector","Event","Button","element","_element","triggerChangeEvent","addAriaPressed","rootElement","closest","DATA_TOGGLE","input","find","INPUT","type","checked","hasClass","ACTIVE","activeElement","removeClass","hasAttribute","classList","contains","trigger","focus","setAttribute","toggleClass","removeData","config","each","data","document","on","CLICK_DATA_API","DATA_TOGGLE_CARROT","event","preventDefault","button","target","BUTTON","_jQueryInterface","call","FOCUS_BLUR_DATA_API","FOCUS","test","Constructor","noConflict","Util","nodeEnv","ready","_init"],"mappings":"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"}