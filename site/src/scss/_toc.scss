@use "../../../scss/layout/breakpoints" as *;
@use "../../../scss/mixins/border-radius" as *;

@layer custom {
  .bd-toc {
    container-type: inline-size;

    @include media-breakpoint-up(lg) {
      position: sticky;
      top: 5rem;
      right: 0;
      z-index: 2;
      height: calc(100vh - 6em);
      // overflow-y: auto;
    }

    .nav {
      --bs-nav-link-justify: flex-start;
      --bs-nav-link-padding-x: .75rem;
      --bs-nav-link-padding-y: .125rem;
      --bs-nav-link-font-size: .875rem;
      --bs-nav-link-hover-bg: transparent;
      --bs-nav-link-active-bg: transparent;
      --bs-nav-link-active-color: var(--bs-fg-body);
      --bs-border-radius: 0;

      .nav .nav-link{
        padding-inline-start: 1.75rem;
      }
    }

    .nav-link {
      border-inline-start: .125rem solid transparent;

      &.active {
        font-weight: 500;
        border-inline-start-color: var(--bs-fg-body);
      }

      code {
        font: inherit;
      }
    }
  }


  .bd-toc-toggle {
    display: flex;
    align-items: center;

    @include media-breakpoint-down(md) {
      justify-content: space-between;
      width: 100%;
    }

    @include media-breakpoint-down(lg) {
      color: var(--bs-color-body);
      border: 1px solid var(--bs-border-color);
      @include border-radius(var(--bs-border-radius));

      &:hover,
      &:focus,
      &:active,
      &[aria-expanded="true"] {
        color: var(--bd-violet);
        background-color: var(--bs-bg-body);
        border-color: var(--bd-violet);
      }

      &:focus,
      &[aria-expanded="true"] {
        box-shadow: 0 0 0 3px rgba(var(--bd-violet-rgb), .25);
      }
    }
  }

  .bd-toc-collapse {
    @include media-breakpoint-down(lg) {
      nav {
        padding: 1.25rem 1.25rem 1.25rem 1rem;
        background-color: var(--bs-bg-subtle);
        border: 1px solid var(--bs-border-color);
        @include border-radius(var(--bs-border-radius));
      }
    }

    @include media-breakpoint-up(lg) {
      display: block !important; // stylelint-disable-line declaration-no-important
    }
  }
}
